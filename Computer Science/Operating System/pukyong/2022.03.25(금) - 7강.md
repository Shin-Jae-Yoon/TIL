# 2022.03.25(금) - 운영체제 수업

<br>

## Process

<br>

<strong>프로세스 개념</strong>

-   프로세스는 어떤 작업의 절차이다. 프로세서는 프로세스와는 다른 것인데 프로세서는 CPU이고 프로세스는 소프트웨어적인 측면에서 작업을 수행하는 가상의 기기이다.
-   운영체제에서 실제로 동작하는 프로그램이 프로세스이다.
-   초창기 컴퓨터는 하나의 작업(작업, batch system)을 수행하는 프로그램이었고 다음에는 시분할 시스템으로 여러 사람의 프로그램을 동시에 실행할 수 있는 프로그램이 되었다.
-   책에서는 작업과 프로세스를 똑같이 취급한다.

-   프로세스는 실행되고 있는 프로그램이다. 프로그램은 수동적인 개체(passive entity), 프로세스는 능동적인 개체(active entity)이다.

-   우리가 프로그램은 만들면 크게 text section / data section으로 나뉜다. 소스 코드에서 실행 코드 부분을 text section, 프로그램이 실행되는 동안 필요한 데이터(예를 들어, 전역 변수)를 data section이라고 한다.

-   사용자가 프로그램을 더블클릭하면, 메모리에 공간을 할당받으면서 프로세스가 되는데 이런 식으로 메모리에 공간을 할당받는다. 힙 섹션은 프로그램 실행 중에 동적으로 할당되는 메모리, 스택 섹션은 함수가 호출될 때마다 해당 함수에서 선언한 변수가 저장되는 공간이다. 함수가 호출될 때마다 위에서 아래로 자라난다. 메모리 주소 0번이 하위, max가 상위인데 스택은 상위 주소에서 하위 주소로 자란다.

<strong>프로세스 상태 – CPU가 놀지 않게 하려고! 5가지 상태!</strong>

-   새로운(new) : 프로세스가 생성 중이다.
-   실행(running) : 명령어들이 실행되고 있다.
-   대기(waiting) : 프로세스가 어떤 이벤트가 일어나기를 기다린다. 이때 이벤트는 입출력 완료 또는 신호의 수신 같은 것이다.
-   준비(ready) : 프로세스가 처리기에 할당되기를 기다린다.
-   종료(terminated) : 프로세스의 실행이 종료되었다.

<strong>프로세스 제어 블록(Process Control Block, PCB)</strong>

-   프로세스 5가지 상태 정보가 기록되는 곳이 PCB이다. PCB는 RAM에 저장된다.

-   프로세스 상태 : 위의 프로세스 상태 정보가 저장
-   프로세스 번호 : 프로세스의 번호 저장
-   프로그램 카운터 : 앞으로 실행할 명령어의 주소를 가리킴
-   CPU 레지스터들 : 나중에 프로세스가 다시 스케줄 될 때 올바르게 실행되도록 하려고 인터럽트 발생 시 저장되어야 함
-   CPU 스케줄링 정보

-   프로세스는 어떤 프로세스에서 다른 프로세스로 “전환”이 필요하다. 이걸 문맥 교환, Context Switching이라고 한다. 프로세스 0에서 진행 중인 명령어를 잠시 멈추고 프로세스 1에서 진행 중인 명령어를 실행한다. 문맥교환!
-   프로그램을 조금씩 조금씩 실행하는 시분할 시스템을 사용 중이다.

<strong>스레드(Threads)</strong>

-   스레드는 하나의 프로세스에서 실행할 수 있는 여러 개의 실행이다. 프로세스에서 여러 개의 스레드를 가질 수 있다.

리눅스에서 프로세스의 표현

-   linux/sched.h 헤더 파일에 아래의 내용이 있다. PCB는 더블 링크 형태로 구성되어있다. 교재 124쪽 참고
    프로세스 스케줄링
-   프로세스 스케줄러가 CPU에서 다음에 어떤 프로세스를 실행시킬지 선택한다.
-   PCB가 리스트 형태로 구성되어있는데, 이것을 저장하고 있는 것은 큐이다.
-   프로세스를 관리하기 위한 큐가 여러 개가 있다. 작업 큐(job queue)는 현재 실행되고 있는 프로세스의 모든 정보를 담고 있다. 준비 큐(ready queue)는 준비(ready) 상태에 있는 프로세스를 저장하고 있는 큐이다. 장치 큐(Device queues)는 입출력 장치 사용을 대기(wait)하고 있는 큐이다. 프로세스는 여러 개의 큐 사이를 왔다 갔다 한다.

-   장치 큐가 복수인 이유 : 컴퓨터의 장치마다 큐가 있기 때문이다. 어떤 프로세스는 네트워크 카드를 사용하려고 waiting 할 수도, 어떤 프로세스는 HDD에 writing 하려고 waiting 할 수도 있다. 각각의 프로세스는 해당하는 장치와 연결된 큐에 저장되어 있다.
