# 2022.04.01(금) - 운영체제 수업

<br>

## 표준 원격 프로시저 호출 <br> ( Remote Procedure Calls, RPC )

-   RPC는 A라는 함수와 B라는 함수가 네트워크로 연결되어 있지만, 떨어져 있다고 하자. 이때도 원격으로 프로시저를 호출할 수 있다. 이렇게 하도록 도와주는 것이 RPC다.
-   Stubs는 클라이언트 쪽에 있는 프록시다. 원격의 프로시저를 호출하게 도와주는 것. 통신을 하는데 필요한 자세한 사항들을 숨겨준다.
-   클라이언트 단의 스텁은 서버의 위치를 판단하고 파라미터를 전달한다.
-   서버 단의 스텁은 메시지를 받아서 파라미터로 잘라내고 정돈하여 프로시저를 수행하고 결과를 돌려준다.
-   매개변수 정돈은 클라이언트와 서버 기기의 데이터 표현 방식의 차이 문제를 해결한다. 어떤 기계는 최상위 바이트를 먼저 저장(big-endian)하고 어떤 기계는 최하위 바이트를 먼저 저장한다. 둘 중 어느 쪽이 “낫다”고 말할 수 없으며 컴퓨터 구조의 선택이다.

-   이를 해결하기 위해 대부분의 RPC 시스템은 가장 중립적인 데이터 표현 방식을 정의한다. 이러한 표현 방식 중 하나가 XDR( External Data Representation )이다. 예를 들어, 데이터를 보내는 쪽이 빅-엔디안, 받는 쪽이 리틀-엔디안이면 중간에서 변환시켜준다.

-   클라이언트 쪽에서 어떤 함수를 실행하고 있는데, X 함수를 만났는데 이 시스템에 없다고 하자. 그러면 커널은 matchmaker를 이용해서 RPC를 사용하는 포트 번호를 찾는다.
-   클라이언트에서 서버로 matchmaker를 포트로 이용하여 RPC X에 해당하는 주소로 보낸다.
-   matchmaker가 메시지를 받아서 답을 찾으려고 한다. 그래서 어느 포트에 연결하라고 서버에서 클라이언트 쪽으로 알려준다.

참고 : matchmaker는 랑데부용 디먼이라고도 불린다.

파이프 – 종류 2가지! 일반 파이프, 지명 파이프

-   두 개의 프로세스가 통신할 수 있게 하는 전달자로서 동작한다.
-   파이프는 초기 UNIX 시스템에서 제공하는 IPC 기법의 하나였다.
-   파이프를 구현하기 위해서 고려해야 하는 4가지 문제

1. 파이프가 단방향 통신 또는 양방향 통신을 허용하는가?
2. 양방향 통신이 허용된다면 반이중 방식인가, 전이중 방식인가? 반이중 방식은 한 방향 정sthdaks 가능하고 전이중 방식은 동시에 양방향 데이터 전송이 가능하다.
3. 통신하는 두 프로세스 간에 부모-자식과 같은 특정 관계가 존재해야만 하는가?
4. 파이프는 네트워크를 통하여 통신이 가능한가, 아니면 동일한 기계 안에 존재하는 두 프로세스끼리만 통신할 수 있는가?

-   일반 파이프 : 일반적인 파이프라면 A와 B 프로세스가 파이프로 통신하고 있으면 C 프로세스는 여기에 접근할 수 없어야 한다. 즉, 파이프를 만든 프로세스 이외에 다른 프로세스는 접근할 수 없어야 한다. 전형적으로 부모 프로세스가 자식 프로세스와 통신하기 위해 파이프를 만든다.
-   지명 파이프 : 부모-자식의 관계가 없어도 통신할 수 있는 파이프이다.

-   일반 파이프는 보통 생산자-소비자 형식이다. 생산자는 끝에 값을 쓰고 소비자는 끝에서 값을 읽을 수 있는 것이다. 일반 파이프는 한쪽으로만 데이터를 전송할 수 있으며 오직 단방향 통신만을 가능하게 한다. 양방향 통신이 필요하면 파이프를 두 개 사용해야 한다. 부모-자식 간의 관계가 필요하다. 윈도우에서는 이를 익명 파이프라고 한다.

-   지명 파이프는 부모-자식 관계가 아니어도 되고 여러 프로세스가 함께 사용할 수 있다.
